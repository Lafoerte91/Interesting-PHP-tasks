<?php 
/*
Дан текст. Разбейте этот текст в многострочный так, чтобы в каждой строке было не более 100 символов и при этом не разрывались слова и не отрывались знаки препинания.
*/
$text = 'Это очень длинный текст, который нужно разбить на строки, чтобы он был удобен для чтения. Но при этом нельзя разрывать слова и знаки препинания. Это очень длинный текст, который нужно разбить на строки, чтобы он был удобен для чтения. Но при этом нельзя разрывать слова и знаки препинания. Это очень длинный текст, который нужно разбить на строки, чтобы он был удобен для чтения. Но при этом нельзя разрывать слова и знаки препинания.';

function wrapText($text) {
  $words = preg_split('/\s+/', $text, -1, PREG_SPLIT_NO_EMPTY); // Разбиваем текст на слова
  $wrappedText = '';
  $currentLineLength = 0;

  foreach($words as $word) {
    if($currentLineLength + mb_strlen($word) > 100) {
      // Если длина текущей строки + длина слова > максимальной длины строки
      $wrappedText .= "<br>"; // Добавляем перенос строки
      $currentLineLength = 0; // Сбрасываем длину текущей строки
    }
    $wrappedText .= $word . ' '; // Добавляем слово к строке
    $currentLineLength += mb_strlen($word) + 1; // Увеличиваем длину текущей строки
  }
  return trim($wrappedText); // Удаляем лишние пробелы в начале и конце
}

$wrappedText = wrapText($text);

echo $wrappedText;